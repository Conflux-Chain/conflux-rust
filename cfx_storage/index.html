<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `cfx_storage` crate."><title>cfx_storage - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-cf3c48c1.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="cfx_storage" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (854f22563 2025-01-31)" data-channel="nightly" data-search-js="search-2d513d54.js" data-settings-js="settings-6dad6058.js" ><script src="../static.files/storage-302de22f.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-9b5d7e41.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../cfx_storage/index.html">cfx_<wbr>storage</a><span class="version">1.0.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>cfx_storage</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/cfx_storage/lib.rs.html#6-237">Source</a> </span></div><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.StorageState"><code>pub use self::state::<a class="struct" href="state/struct.State.html" title="struct cfx_storage::state::State">State</a> as StorageState;</code></dt><dt id="reexport.StorageStateTrait"><code>pub use self::state::<a class="trait" href="state/trait.StateTrait.html" title="trait cfx_storage::state::StateTrait">StateTrait</a> as StorageStateTrait;</code></dt><dt id="reexport.StorageStateTraitExt"><code>pub use self::state::<a class="trait" href="state/trait.StateTraitExt.html" title="trait cfx_storage::state::StateTraitExt">StateTraitExt</a> as StorageStateTraitExt;</code></dt><dt id="reexport.StateIndex"><code>pub use self::state_manager::<a class="struct" href="state_manager/struct.StateIndex.html" title="struct cfx_storage::state_manager::StateIndex">StateIndex</a>;</code></dt><dt id="reexport.StorageManager"><code>pub use self::state_manager::<a class="struct" href="state_manager/struct.StateManager.html" title="struct cfx_storage::state_manager::StateManager">StateManager</a> as StorageManager;</code></dt><dt id="reexport.StorageManagerTrait"><code>pub use self::state_manager::<a class="trait" href="state_manager/trait.StateManagerTrait.html" title="trait cfx_storage::state_manager::StateManagerTrait">StateManagerTrait</a> as StorageManagerTrait;</code></dt><dt id="reexport.KeyValueDbTrait"><code>pub use self::storage_db::<a class="trait" href="storage_db/key_value_db/trait.KeyValueDbTrait.html" title="trait cfx_storage::storage_db::key_value_db::KeyValueDbTrait">KeyValueDbTrait</a>;</code></dt><dt id="reexport.SimpleMpt"><code>pub use crate::tests::<a class="struct" href="tests/struct.FakeSnapshotMptDb.html" title="struct cfx_storage::tests::FakeSnapshotMptDb">FakeSnapshotMptDb</a> as SimpleMpt;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="cache/index.html" title="mod cfx_storage::cache">cache</a></dt><dt><a class="mod" href="cache_manager_delta_mpts/index.html" title="mod cfx_storage::cache_manager_delta_mpts">cache_<wbr>manager_<wbr>delta_<wbr>mpts</a></dt><dt><a class="mod" href="cow_node_ref/index.html" title="mod cfx_storage::cow_node_ref">cow_<wbr>node_<wbr>ref</a></dt><dt><a class="mod" href="defaults/index.html" title="mod cfx_storage::defaults">defaults</a></dt><dt><a class="mod" href="delta_mpt_iterator/index.html" title="mod cfx_storage::delta_mpt_iterator">delta_<wbr>mpt_<wbr>iterator</a></dt><dt><a class="mod" href="delta_mpt_open_db_manager/index.html" title="mod cfx_storage::delta_mpt_open_db_manager">delta_<wbr>mpt_<wbr>open_<wbr>db_<wbr>manager</a></dt><dt><a class="mod" href="state/index.html" title="mod cfx_storage::state">state</a></dt><dt><a class="mod" href="state_manager/index.html" title="mod cfx_storage::state_manager">state_<wbr>manager</a></dt><dt><a class="mod" href="storage_db/index.html" title="mod cfx_storage::storage_db">storage_<wbr>db</a></dt><dt><a class="mod" href="storage_dir/index.html" title="mod cfx_storage::storage_dir">storage_<wbr>dir</a></dt><dt><a class="mod" href="subtrie_visitor/index.html" title="mod cfx_storage::subtrie_visitor">subtrie_<wbr>visitor</a></dt><dt><a class="mod" href="tests/index.html" title="mod cfx_storage::tests">tests</a></dt><dt><a class="mod" href="utils/index.html" title="mod cfx_storage::utils">utils</a></dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.ArcDeltaDbWrapper.html" title="struct cfx_storage::ArcDeltaDbWrapper">ArcDelta<wbr>DbWrapper</a></dt><dt><a class="struct" href="struct.AtomicCommit.html" title="struct cfx_storage::AtomicCommit">Atomic<wbr>Commit</a></dt><dt><a class="struct" href="struct.AtomicCommitTransaction.html" title="struct cfx_storage::AtomicCommitTransaction">Atomic<wbr>Commit<wbr>Transaction</a></dt><dt><a class="struct" href="struct.CompressedPathRaw.html" title="struct cfx_storage::CompressedPathRaw">Compressed<wbr>Path<wbr>Raw</a></dt><dt><a class="struct" href="struct.ConsensusParam.html" title="struct cfx_storage::ConsensusParam">Consensus<wbr>Param</a></dt><dd>Consensus parameter is only configurable in test mode.</dd><dt><a class="struct" href="struct.CowNodeRef.html" title="struct cfx_storage::CowNodeRef">CowNode<wbr>Ref</a></dt><dd>CowNodeRef facilities access and modification to trie nodes in multi-version
MPT. It offers read-only access to the original trie node, and creates an
unique owned trie node once there is any modification. The ownership is
maintained centralized in owned_node_set which is passed into many methods
as argument. When CowNodeRef is created from an owned node, the ownership is
transferred into the CowNodeRef object. The visitor of MPT makes sure that
ownership of any trie node is not transferred more than once at the same
time.</dd><dt><a class="struct" href="struct.DeltaMptIdGen.html" title="struct cfx_storage::DeltaMptIdGen">Delta<wbr>MptId<wbr>Gen</a></dt><dt><a class="struct" href="struct.DeltaMptIterator.html" title="struct cfx_storage::DeltaMptIterator">Delta<wbr>MptIterator</a></dt><dt><a class="struct" href="struct.FullSyncVerifier.html" title="struct cfx_storage::FullSyncVerifier">Full<wbr>Sync<wbr>Verifier</a></dt><dt><a class="struct" href="struct.KvdbRocksdb.html" title="struct cfx_storage::KvdbRocksdb">Kvdb<wbr>Rocksdb</a></dt><dt><a class="struct" href="struct.KvdbSqlite.html" title="struct cfx_storage::KvdbSqlite">Kvdb<wbr>Sqlite</a></dt><dt><a class="struct" href="struct.KvdbSqliteStatements.html" title="struct cfx_storage::KvdbSqliteStatements">Kvdb<wbr>Sqlite<wbr>Statements</a></dt><dt><a class="struct" href="struct.MaybeNodeRefDeltaMptCompact.html" title="struct cfx_storage::MaybeNodeRefDeltaMptCompact">Maybe<wbr>Node<wbr>RefDelta<wbr>MptCompact</a></dt><dt><a class="struct" href="struct.MemOptimizedTrieNode.html" title="struct cfx_storage::MemOptimizedTrieNode">MemOptimized<wbr>Trie<wbr>Node</a></dt><dd>A node consists of an optional compressed path (concept of Patricia
Trie), an optional ChildrenTable (if the node is intermediate), an
optional value attached, and the Merkle hash for subtree.</dd><dt><a class="struct" href="struct.MptSlicer.html" title="struct cfx_storage::MptSlicer">MptSlicer</a></dt><dt><a class="struct" href="struct.MultiVersionMerklePatriciaTrie.html" title="struct cfx_storage::MultiVersionMerklePatriciaTrie">Multi<wbr>Version<wbr>Merkle<wbr>Patricia<wbr>Trie</a></dt><dt><a class="struct" href="struct.NodeMerkleProof.html" title="struct cfx_storage::NodeMerkleProof">Node<wbr>Merkle<wbr>Proof</a></dt><dt><a class="struct" href="struct.NodeRefDeltaMptCompact.html" title="struct cfx_storage::NodeRefDeltaMptCompact">Node<wbr>RefDelta<wbr>MptCompact</a></dt><dd>The MSB is used to indicate if a node is in mem or on disk,
the rest 31 bits specifies the index of the node in the
memory region.</dd><dt><a class="struct" href="struct.OpenDeltaDbLru.html" title="struct cfx_storage::OpenDeltaDbLru">Open<wbr>Delta<wbr>DbLru</a></dt><dt><a class="struct" href="struct.OwnedNodeSet.html" title="struct cfx_storage::OwnedNodeSet">Owned<wbr>Node<wbr>Set</a></dt><dd>A container to store information about owned nodes.</dd><dt><a class="struct" href="struct.RecordingStorage.html" title="struct cfx_storage::RecordingStorage">Recording<wbr>Storage</a></dt><dt><a class="struct" href="struct.ReplicatedState.html" title="struct cfx_storage::ReplicatedState">Replicated<wbr>State</a></dt><dt><a class="struct" href="struct.Slab.html" title="struct cfx_storage::Slab">Slab</a></dt><dd>Pre-allocated storage for a uniform data type.
The modified slab offers thread-safety without giant lock by mimicking the
behavior of independent pointer at best.</dd><dt><a class="struct" href="struct.SnapshotDbManagerSqlite.html" title="struct cfx_storage::SnapshotDbManagerSqlite">Snapshot<wbr>DbManager<wbr>Sqlite</a></dt><dt><a class="struct" href="struct.SqliteConnection.html" title="struct cfx_storage::SqliteConnection">Sqlite<wbr>Connection</a></dt><dt><a class="struct" href="struct.StateProof.html" title="struct cfx_storage::StateProof">State<wbr>Proof</a></dt><dt><a class="struct" href="struct.StateProofMerger.html" title="struct cfx_storage::StateProofMerger">State<wbr>Proof<wbr>Merger</a></dt><dt><a class="struct" href="struct.StorageConfiguration.html" title="struct cfx_storage::StorageConfiguration">Storage<wbr>Configuration</a></dt><dt><a class="struct" href="struct.SubTrieVisitor.html" title="struct cfx_storage::SubTrieVisitor">SubTrie<wbr>Visitor</a></dt><dt><a class="struct" href="struct.TrieProof.html" title="struct cfx_storage::TrieProof">Trie<wbr>Proof</a></dt><dt><a class="struct" href="struct.TrieProofNode.html" title="struct cfx_storage::TrieProofNode">Trie<wbr>Proof<wbr>Node</a></dt><dt><a class="struct" href="struct.VanillaChildrenTable.html" title="struct cfx_storage::VanillaChildrenTable">Vanilla<wbr>Children<wbr>Table</a></dt></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.Error.html" title="enum cfx_storage::Error">Error</a></dt><dt><a class="enum" href="enum.NodeRefDeltaMpt.html" title="enum cfx_storage::NodeRefDeltaMpt">Node<wbr>RefDelta<wbr>Mpt</a></dt><dt><a class="enum" href="enum.ProvideExtraSnapshotSyncConfig.html" title="enum cfx_storage::ProvideExtraSnapshotSyncConfig">Provide<wbr>Extra<wbr>Snapshot<wbr>Sync<wbr>Config</a></dt></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.DEFAULT_NODE_MAP_SIZE.html" title="constant cfx_storage::DEFAULT_NODE_MAP_SIZE">DEFAULT_<wbr>NODE_<wbr>MAP_<wbr>SIZE</a></dt></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.KVInserter.html" title="trait cfx_storage::KVInserter">KVInserter</a></dt><dd>Classes implement KVInserter is used to store key-values in MPT iteration.</dd><dt><a class="trait" href="trait.OpenableOnDemandOpenDeltaDbTrait.html" title="trait cfx_storage::OpenableOnDemandOpenDeltaDbTrait">Openable<wbr>OnDemand<wbr>Open<wbr>Delta<wbr>DbTrait</a></dt></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.into_simple_mpt_key.html" title="fn cfx_storage::into_simple_mpt_key">into_<wbr>simple_<wbr>mpt_<wbr>key</a></dt><dd>Given an integer-indexed <code>SimpleMpt</code> with <code>num_keys</code> elements
stored in it, convert <code>key</code> into the corresponding key format.</dd><dt><a class="fn" href="fn.make_simple_mpt.html" title="fn cfx_storage::make_simple_mpt">make_<wbr>simple_<wbr>mpt</a></dt><dt><a class="fn" href="fn.rlp_key_value_len.html" title="fn cfx_storage::rlp_key_value_len">rlp_<wbr>key_<wbr>value_<wbr>len</a></dt><dd>We assume that the keys and values are serialized in separate vector,
therefore we only add up those rlp string lengths.
The rlp bytes for the up-most structures are ignored for sync slicer.</dd><dt><a class="fn" href="fn.simple_mpt_merkle_root.html" title="fn cfx_storage::simple_mpt_merkle_root">simple_<wbr>mpt_<wbr>merkle_<wbr>root</a></dt><dt><a class="fn" href="fn.simple_mpt_proof.html" title="fn cfx_storage::simple_mpt_proof">simple_<wbr>mpt_<wbr>proof</a></dt></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.ChildrenTableDeltaMpt.html" title="type cfx_storage::ChildrenTableDeltaMpt">Children<wbr>Table<wbr>Delta<wbr>Mpt</a></dt><dt><a class="type" href="type.ChildrenTableManagedDeltaMpt.html" title="type cfx_storage::ChildrenTableManagedDeltaMpt">Children<wbr>Table<wbr>Managed<wbr>Delta<wbr>Mpt</a></dt><dt><a class="type" href="type.CompactNodeRef.html" title="type cfx_storage::CompactNodeRef">Compact<wbr>Node<wbr>Ref</a></dt><dt><a class="type" href="type.DeltaMpt.html" title="type cfx_storage::DeltaMpt">Delta<wbr>Mpt</a></dt><dt><a class="type" href="type.MptKeyValue.html" title="type cfx_storage::MptKeyValue">MptKey<wbr>Value</a></dt><dt><a class="type" href="type.Result.html" title="type cfx_storage::Result">Result</a></dt><dt><a class="type" href="type.StorageRootProof.html" title="type cfx_storage::StorageRootProof">Storage<wbr>Root<wbr>Proof</a></dt><dt><a class="type" href="type.TrieNodeDeltaMpt.html" title="type cfx_storage::TrieNodeDeltaMpt">Trie<wbr>Node<wbr>Delta<wbr>Mpt</a></dt><dt><a class="type" href="type.TrieNodeDeltaMptCell.html" title="type cfx_storage::TrieNodeDeltaMptCell">Trie<wbr>Node<wbr>Delta<wbr>MptCell</a></dt></dl><script type="text/json" id="notable-traits-data">{"&[u8]":"<h3>Notable traits for <code>&amp;[<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.u8.html\">u8</a>]</code></h3><pre><code><div class=\"where\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/std/io/trait.Read.html\" title=\"trait std::io::Read\">Read</a> for &amp;[<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.u8.html\">u8</a>]</div>","&mut [u8]":"<h3>Notable traits for <code>&amp;mut [<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.u8.html\">u8</a>]</code></h3><pre><code><div class=\"where\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/std/io/trait.Write.html\" title=\"trait std::io::Write\">Write</a> for &amp;mut [<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.u8.html\">u8</a>]</div>","Vec<u8>":"<h3>Notable traits for <code><a class=\"struct\" href=\"https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.u8.html\">u8</a>, A&gt;</code></h3><pre><code><div class=\"where\">impl&lt;A&gt; <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/std/io/trait.Write.html\" title=\"trait std::io::Write\">Write</a> for <a class=\"struct\" href=\"https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.u8.html\">u8</a>, A&gt;<div class=\"where\">where\n    A: <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/alloc/trait.Allocator.html\" title=\"trait core::alloc::Allocator\">Allocator</a>,</div></div>"}</script></section></div></main></body></html>