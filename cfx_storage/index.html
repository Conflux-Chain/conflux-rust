<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `cfx_storage` crate."><title>cfx_storage - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-081576b923113409.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="cfx_storage" data-themes="" data-resource-suffix="" data-rustdoc-version="1.79.0-nightly (fb898629a 2024-04-21)" data-channel="nightly" data-search-js="search-bf21c90c8c1d92b1.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-e32f0c247825364d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-09095024cf37855e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../cfx_storage/index.html">cfx_storage</a><span class="version">1.0.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Aliases</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../cfx_storage/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Type ‘S’ or ‘/’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings">Settings</a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">cfx_storage</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/cfx_storage/lib.rs.html#6-237">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.StorageState"><code>pub use self::state::<a class="struct" href="state/struct.State.html" title="struct cfx_storage::state::State">State</a> as StorageState;</code></div></li><li><div class="item-name" id="reexport.StorageStateTrait"><code>pub use self::state::<a class="trait" href="state/trait.StateTrait.html" title="trait cfx_storage::state::StateTrait">StateTrait</a> as StorageStateTrait;</code></div></li><li><div class="item-name" id="reexport.StorageStateTraitExt"><code>pub use self::state::<a class="trait" href="state/trait.StateTraitExt.html" title="trait cfx_storage::state::StateTraitExt">StateTraitExt</a> as StorageStateTraitExt;</code></div></li><li><div class="item-name" id="reexport.StateIndex"><code>pub use self::state_manager::<a class="struct" href="state_manager/struct.StateIndex.html" title="struct cfx_storage::state_manager::StateIndex">StateIndex</a>;</code></div></li><li><div class="item-name" id="reexport.StorageManager"><code>pub use self::state_manager::<a class="struct" href="state_manager/struct.StateManager.html" title="struct cfx_storage::state_manager::StateManager">StateManager</a> as StorageManager;</code></div></li><li><div class="item-name" id="reexport.StorageManagerTrait"><code>pub use self::state_manager::<a class="trait" href="state_manager/trait.StateManagerTrait.html" title="trait cfx_storage::state_manager::StateManagerTrait">StateManagerTrait</a> as StorageManagerTrait;</code></div></li><li><div class="item-name" id="reexport.KeyValueDbTrait"><code>pub use self::storage_db::<a class="trait" href="storage_db/key_value_db/trait.KeyValueDbTrait.html" title="trait cfx_storage::storage_db::key_value_db::KeyValueDbTrait">KeyValueDbTrait</a>;</code></div></li><li><div class="item-name" id="reexport.SimpleMpt"><code>pub use crate::tests::<a class="struct" href="tests/struct.FakeSnapshotMptDb.html" title="struct cfx_storage::tests::FakeSnapshotMptDb">FakeSnapshotMptDb</a> as SimpleMpt;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="cache/index.html" title="mod cfx_storage::cache">cache</a></div></li><li><div class="item-name"><a class="mod" href="cache_manager_delta_mpts/index.html" title="mod cfx_storage::cache_manager_delta_mpts">cache_manager_delta_mpts</a></div></li><li><div class="item-name"><a class="mod" href="cow_node_ref/index.html" title="mod cfx_storage::cow_node_ref">cow_node_ref</a></div></li><li><div class="item-name"><a class="mod" href="defaults/index.html" title="mod cfx_storage::defaults">defaults</a></div></li><li><div class="item-name"><a class="mod" href="delta_mpt_iterator/index.html" title="mod cfx_storage::delta_mpt_iterator">delta_mpt_iterator</a></div></li><li><div class="item-name"><a class="mod" href="delta_mpt_open_db_manager/index.html" title="mod cfx_storage::delta_mpt_open_db_manager">delta_mpt_open_db_manager</a></div></li><li><div class="item-name"><a class="mod" href="state/index.html" title="mod cfx_storage::state">state</a></div></li><li><div class="item-name"><a class="mod" href="state_manager/index.html" title="mod cfx_storage::state_manager">state_manager</a></div></li><li><div class="item-name"><a class="mod" href="storage_db/index.html" title="mod cfx_storage::storage_db">storage_db</a></div></li><li><div class="item-name"><a class="mod" href="storage_dir/index.html" title="mod cfx_storage::storage_dir">storage_dir</a></div></li><li><div class="item-name"><a class="mod" href="subtrie_visitor/index.html" title="mod cfx_storage::subtrie_visitor">subtrie_visitor</a></div></li><li><div class="item-name"><a class="mod" href="tests/index.html" title="mod cfx_storage::tests">tests</a></div></li><li><div class="item-name"><a class="mod" href="utils/index.html" title="mod cfx_storage::utils">utils</a></div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ArcDeltaDbWrapper.html" title="struct cfx_storage::ArcDeltaDbWrapper">ArcDeltaDbWrapper</a></div></li><li><div class="item-name"><a class="struct" href="struct.AtomicCommit.html" title="struct cfx_storage::AtomicCommit">AtomicCommit</a></div></li><li><div class="item-name"><a class="struct" href="struct.AtomicCommitTransaction.html" title="struct cfx_storage::AtomicCommitTransaction">AtomicCommitTransaction</a></div></li><li><div class="item-name"><a class="struct" href="struct.CompressedPathRaw.html" title="struct cfx_storage::CompressedPathRaw">CompressedPathRaw</a></div></li><li><div class="item-name"><a class="struct" href="struct.ConsensusParam.html" title="struct cfx_storage::ConsensusParam">ConsensusParam</a></div><div class="desc docblock-short">Consensus parameter is only configurable in test mode.</div></li><li><div class="item-name"><a class="struct" href="struct.CowNodeRef.html" title="struct cfx_storage::CowNodeRef">CowNodeRef</a></div><div class="desc docblock-short">CowNodeRef facilities access and modification to trie nodes in multi-version
MPT. It offers read-only access to the original trie node, and creates an
unique owned trie node once there is any modification. The ownership is
maintained centralized in owned_node_set which is passed into many methods
as argument. When CowNodeRef is created from an owned node, the ownership is
transferred into the CowNodeRef object. The visitor of MPT makes sure that
ownership of any trie node is not transferred more than once at the same
time.</div></li><li><div class="item-name"><a class="struct" href="struct.DeltaMptIdGen.html" title="struct cfx_storage::DeltaMptIdGen">DeltaMptIdGen</a></div></li><li><div class="item-name"><a class="struct" href="struct.DeltaMptIterator.html" title="struct cfx_storage::DeltaMptIterator">DeltaMptIterator</a></div></li><li><div class="item-name"><a class="struct" href="struct.FullSyncVerifier.html" title="struct cfx_storage::FullSyncVerifier">FullSyncVerifier</a></div></li><li><div class="item-name"><a class="struct" href="struct.KvdbRocksdb.html" title="struct cfx_storage::KvdbRocksdb">KvdbRocksdb</a></div></li><li><div class="item-name"><a class="struct" href="struct.KvdbSqlite.html" title="struct cfx_storage::KvdbSqlite">KvdbSqlite</a></div></li><li><div class="item-name"><a class="struct" href="struct.KvdbSqliteStatements.html" title="struct cfx_storage::KvdbSqliteStatements">KvdbSqliteStatements</a></div></li><li><div class="item-name"><a class="struct" href="struct.MaybeNodeRefDeltaMptCompact.html" title="struct cfx_storage::MaybeNodeRefDeltaMptCompact">MaybeNodeRefDeltaMptCompact</a></div></li><li><div class="item-name"><a class="struct" href="struct.MemOptimizedTrieNode.html" title="struct cfx_storage::MemOptimizedTrieNode">MemOptimizedTrieNode</a></div><div class="desc docblock-short">A node consists of an optional compressed path (concept of Patricia
Trie), an optional ChildrenTable (if the node is intermediate), an
optional value attached, and the Merkle hash for subtree.</div></li><li><div class="item-name"><a class="struct" href="struct.MptSlicer.html" title="struct cfx_storage::MptSlicer">MptSlicer</a></div></li><li><div class="item-name"><a class="struct" href="struct.MultiVersionMerklePatriciaTrie.html" title="struct cfx_storage::MultiVersionMerklePatriciaTrie">MultiVersionMerklePatriciaTrie</a></div></li><li><div class="item-name"><a class="struct" href="struct.NodeMerkleProof.html" title="struct cfx_storage::NodeMerkleProof">NodeMerkleProof</a></div></li><li><div class="item-name"><a class="struct" href="struct.NodeRefDeltaMptCompact.html" title="struct cfx_storage::NodeRefDeltaMptCompact">NodeRefDeltaMptCompact</a></div><div class="desc docblock-short">The MSB is used to indicate if a node is in mem or on disk,
the rest 31 bits specifies the index of the node in the
memory region.</div></li><li><div class="item-name"><a class="struct" href="struct.OpenDeltaDbLru.html" title="struct cfx_storage::OpenDeltaDbLru">OpenDeltaDbLru</a></div></li><li><div class="item-name"><a class="struct" href="struct.OwnedNodeSet.html" title="struct cfx_storage::OwnedNodeSet">OwnedNodeSet</a></div><div class="desc docblock-short">A container to store information about owned nodes.</div></li><li><div class="item-name"><a class="struct" href="struct.RecordingStorage.html" title="struct cfx_storage::RecordingStorage">RecordingStorage</a></div></li><li><div class="item-name"><a class="struct" href="struct.ReplicatedState.html" title="struct cfx_storage::ReplicatedState">ReplicatedState</a></div></li><li><div class="item-name"><a class="struct" href="struct.Slab.html" title="struct cfx_storage::Slab">Slab</a></div><div class="desc docblock-short">Pre-allocated storage for a uniform data type.
The modified slab offers thread-safety without giant lock by mimicking the
behavior of independent pointer at best.</div></li><li><div class="item-name"><a class="struct" href="struct.SnapshotDbManagerSqlite.html" title="struct cfx_storage::SnapshotDbManagerSqlite">SnapshotDbManagerSqlite</a></div></li><li><div class="item-name"><a class="struct" href="struct.SqliteConnection.html" title="struct cfx_storage::SqliteConnection">SqliteConnection</a></div></li><li><div class="item-name"><a class="struct" href="struct.StateProof.html" title="struct cfx_storage::StateProof">StateProof</a></div></li><li><div class="item-name"><a class="struct" href="struct.StateProofMerger.html" title="struct cfx_storage::StateProofMerger">StateProofMerger</a></div></li><li><div class="item-name"><a class="struct" href="struct.StorageConfiguration.html" title="struct cfx_storage::StorageConfiguration">StorageConfiguration</a></div></li><li><div class="item-name"><a class="struct" href="struct.SubTrieVisitor.html" title="struct cfx_storage::SubTrieVisitor">SubTrieVisitor</a></div></li><li><div class="item-name"><a class="struct" href="struct.TrieProof.html" title="struct cfx_storage::TrieProof">TrieProof</a></div></li><li><div class="item-name"><a class="struct" href="struct.TrieProofNode.html" title="struct cfx_storage::TrieProofNode">TrieProofNode</a></div></li><li><div class="item-name"><a class="struct" href="struct.VanillaChildrenTable.html" title="struct cfx_storage::VanillaChildrenTable">VanillaChildrenTable</a></div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum cfx_storage::Error">Error</a></div></li><li><div class="item-name"><a class="enum" href="enum.NodeRefDeltaMpt.html" title="enum cfx_storage::NodeRefDeltaMpt">NodeRefDeltaMpt</a></div></li><li><div class="item-name"><a class="enum" href="enum.ProvideExtraSnapshotSyncConfig.html" title="enum cfx_storage::ProvideExtraSnapshotSyncConfig">ProvideExtraSnapshotSyncConfig</a></div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.DEFAULT_NODE_MAP_SIZE.html" title="constant cfx_storage::DEFAULT_NODE_MAP_SIZE">DEFAULT_NODE_MAP_SIZE</a></div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.KVInserter.html" title="trait cfx_storage::KVInserter">KVInserter</a></div><div class="desc docblock-short">Classes implement KVInserter is used to store key-values in MPT iteration.</div></li><li><div class="item-name"><a class="trait" href="trait.OpenableOnDemandOpenDeltaDbTrait.html" title="trait cfx_storage::OpenableOnDemandOpenDeltaDbTrait">OpenableOnDemandOpenDeltaDbTrait</a></div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.into_simple_mpt_key.html" title="fn cfx_storage::into_simple_mpt_key">into_simple_mpt_key</a></div><div class="desc docblock-short">Given an integer-indexed <code>SimpleMpt</code> with <code>num_keys</code> elements
stored in it, convert <code>key</code> into the corresponding key format.</div></li><li><div class="item-name"><a class="fn" href="fn.make_simple_mpt.html" title="fn cfx_storage::make_simple_mpt">make_simple_mpt</a></div></li><li><div class="item-name"><a class="fn" href="fn.rlp_key_value_len.html" title="fn cfx_storage::rlp_key_value_len">rlp_key_value_len</a></div><div class="desc docblock-short">We assume that the keys and values are serialized in separate vector,
therefore we only add up those rlp string lengths.
The rlp bytes for the up-most structures are ignored for sync slicer.</div></li><li><div class="item-name"><a class="fn" href="fn.simple_mpt_merkle_root.html" title="fn cfx_storage::simple_mpt_merkle_root">simple_mpt_merkle_root</a></div></li><li><div class="item-name"><a class="fn" href="fn.simple_mpt_proof.html" title="fn cfx_storage::simple_mpt_proof">simple_mpt_proof</a></div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.ChildrenTableDeltaMpt.html" title="type cfx_storage::ChildrenTableDeltaMpt">ChildrenTableDeltaMpt</a></div></li><li><div class="item-name"><a class="type" href="type.ChildrenTableManagedDeltaMpt.html" title="type cfx_storage::ChildrenTableManagedDeltaMpt">ChildrenTableManagedDeltaMpt</a></div></li><li><div class="item-name"><a class="type" href="type.CompactNodeRef.html" title="type cfx_storage::CompactNodeRef">CompactNodeRef</a></div></li><li><div class="item-name"><a class="type" href="type.DeltaMpt.html" title="type cfx_storage::DeltaMpt">DeltaMpt</a></div></li><li><div class="item-name"><a class="type" href="type.MptKeyValue.html" title="type cfx_storage::MptKeyValue">MptKeyValue</a></div></li><li><div class="item-name"><a class="type" href="type.Result.html" title="type cfx_storage::Result">Result</a></div></li><li><div class="item-name"><a class="type" href="type.StorageRootProof.html" title="type cfx_storage::StorageRootProof">StorageRootProof</a></div></li><li><div class="item-name"><a class="type" href="type.TrieNodeDeltaMpt.html" title="type cfx_storage::TrieNodeDeltaMpt">TrieNodeDeltaMpt</a></div></li><li><div class="item-name"><a class="type" href="type.TrieNodeDeltaMptCell.html" title="type cfx_storage::TrieNodeDeltaMptCell">TrieNodeDeltaMptCell</a></div></li></ul></section></div></main></body></html>