name: conflux-cli
about: Conflux CLI.
author: The Conflux Team

setting: SubcommandRequiredElseHelp

args:
  - url:
      help: URL of RPC server
      long: url
      takes_value: true
      default_value: http://localhost:12537
      global: true
subcommands:
  - price:
      about: Get recent mean gas price
      args:
        - rpc-method:
            default_value: cfx_gasPrice
            hidden: true
  - epoch:
      about: Get epoch number
      args:
        - rpc-method:
            default_value: cfx_epochNumber
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: epoch
            hidden: true
        - epoch:
            help: Epoch
            long: epoch
            takes_value: true
            possible_values: [latest_mined, latest_state, earliest]
  - balance:
      about: Get balance of specified account
      args:
        - rpc-method:
            default_value: cfx_getBalance
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: address,epoch
            hidden: true
        - address:
            help: Account address
            long: address
            required: true
            takes_value: true
        - epoch:
            help: Epoch
            long: epoch
            takes_value: true
            possible_values: [latest_mined, latest_state, earliest]
  - code:
      about: Get bytecode of specified contract
      args:
        - rpc-method:
            default_value: cfx_getCode
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: address,epoch
            hidden: true
        - address:
            help: Contract address
            long: address
            required: true
            takes_value: true
        - epoch:
            help: Epoch
            long: epoch
            takes_value: true
            possible_values: [latest_mined, latest_state, earliest]
  - block-by-hash:
      about: Get block by hash
      args:
        - rpc-method:
            default_value: cfx_getBlockByHash
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: hash,include-txs:bool
            hidden: true
        - hash:
            help: Block hash
            long: hash
            required: true
            takes_value: true
        - include-txs:
            help: Whether to return detailed transactions in block
            long: include-txs
  - assume-block:
      about: Get block by hash with pivot chain assumption
      args:
        - rpc-method:
            default_value: cfx_getBlockByHashWithPivotAssumption
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: block-hash,pivot-hash,epoch-number:u64
            hidden: true
        - block-hash:
            help: Block hash
            long: block-hash
            required: true
            takes_value: true
            value_name: HASH
        - pivot-hash:
            help: Pivot block hash
            long: pivot-hash
            required: true
            takes_value: true
            value_name: HASH
        - epoch-number:
            help: Epoch number
            long: epoch-number
            required: true
            takes_value: true
            value_name: NUMBER
  - block-by-epoch:
      about: Get block by epoch
      args:
        - rpc-method:
            default_value: cfx_getBlockByEpochNumber
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: epoch,include-txs:bool
            hidden: true
        - epoch:
            help: Epoch
            long: epoch
            required: true
            takes_value: true
            possible_values: [latest_mined, latest_state, earliest]
        - include-txs:
            help: Whether to return detailed transactions in block
            long: include-txs
  - best-block-hash:
      about: Get the best block hash
      args:
        - rpc-method:
            default_value: cfx_getBestBlockHash
            hidden: true
  - nonce:
      about: Get nonce of specified account
      args:
        - rpc-method:
            default_value: cfx_getTransactionCount
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: address,epoch
            hidden: true
        - address:
            help: Account address
            long: address
            required: true
            takes_value: true
        - epoch:
            help: Epoch
            long: epoch
            takes_value: true
            possible_values: [latest_mined, latest_state, earliest]
  - send:
      about: Send a signed transaction and return its hash
      args:
        - rpc-method:
            default_value: cfx_sendRawTransaction
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: raw-bytes
            hidden: true
        - raw-bytes:
            help: Signed transaction data
            long: raw-bytes
            required: true
            takes_value: true
            value_name: HEX
  - tx:
      about: Get transaction by hash
      args:
        - rpc-method:
            default_value: cfx_getTransactionByHash
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: hash
            hidden: true
        - hash:
            help: Transaction hash
            long: hash
            required: true
            takes_value: true
  - blocks:
      about: Get blocks of specified epoch
      args:
        - rpc-method:
            default_value: cfx_getBlocksByEpoch
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: epoch
            hidden: true
        - epoch:
            help: Epoch
            long: epoch
            required: true
            takes_value: true
            possible_values: [latest_mined, latest_state, earliest]
  - receipt:
      about: Get receipt by transaction hash
      args:
        - rpc-method:
            default_value: cfx_getTransactionReceipt
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: hash
            hidden: true
        - hash:
            help: Transaction hash
            long: hash
            required: true
            takes_value: true
  - call:
      about: Executes a call request immediately without creating a transaction and returns the results
      args:
        - rpc-method:
            default_value: cfx_call
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: tx:map(from;to;gasPrice;gas;value;data;nonce),epoch
            hidden: true
        - from:
            help: Transaction from address
            long: from
            takes_value: true
            value_name: ADDRESS
        - to:
            help: Transaction to address
            long: to
            takes_value: true
            value_name: ADDRESS
        - gasPrice:
            help: Transaction gas price
            long: gas-price
            takes_value: true
            value_name: HEX
        - gas:
            help: Gas provided for transaction execution
            long: gas
            takes_value: true
            value_name: HEX
        - value:
            help: value sent with this transaction
            long: value
            takes_value: true
            value_name: HEX
        - data:
            help: Hash of the method signature and encoded parameters
            long: data
            takes_value: true
            value_name: HEX
        - nonce:
            help: Transaction nonce
            long: nonce
            takes_value: true
            value_name: HEX
        - epoch:
            help: Epoch
            long: epoch
            takes_value: true
            value_name: EPOCH
            possible_values: [latest_mined, latest_state, earliest]
  - estimate-gas:
      about: Executes a call request immediately without creating a transaction and returns the gas used
      args:
        - rpc-method:
            default_value: cfx_estimateGas
            hidden: true
        - rpc-args:
            multiple: true
            use_delimiter: true
            default_value: tx:map(from;to;gasPrice;gas;value;data;nonce),epoch
            hidden: true
        - from:
            help: Transaction from address
            long: from
            takes_value: true
            value_name: ADDRESS
        - to:
            help: Transaction to address
            long: to
            takes_value: true
            value_name: ADDRESS
        - gasPrice:
            help: Transaction gas price
            long: gas-price
            takes_value: true
            value_name: HEX
        - gas:
            help: Gas provided for transaction execution
            long: gas
            takes_value: true
            value_name: HEX
        - value:
            help: value sent with this transaction
            long: value
            takes_value: true
            value_name: HEX
        - data:
            help: Hash of the method signature and encoded parameters
            long: data
            takes_value: true
            value_name: HEX
        - nonce:
            help: Transaction nonce
            long: nonce
            takes_value: true
            value_name: HEX
        - epoch:
            help: Epoch
            long: epoch
            takes_value: true
            value_name: EPOCH
            possible_values: [latest_mined, latest_state, earliest]
  - debug:
      about: Debug subcommands (requires jsonrpc_local_http_port configured)
      setting: SubcommandRequiredElseHelp
      subcommands:
        - send:
            about: Send a transaction and return its hash
            args:
            - rpc-method:
                default_value: send_transaction
                hidden: true
            - rpc-args:
                multiple: true
                use_delimiter: true
                default_value: tx:map(from;to;gasPrice;gas;value;data;nonce),password
                hidden: true
            - from:
                help: Transaction from address
                long: from
                required: true
                takes_value: true
                value_name: ADDRESS
            - to:
                help: Transaction to address (empty to create contract)
                long: to
                takes_value: true
                value_name: ADDRESS
            - gasPrice:
                help: Transaction gas price
                long: gas-price
                takes_value: true
                value_name: HEX
                default_value: "0x2540BE400" # 10 GDrip
            - gas:
                help: Gas provided for transaction execution
                long: gas
                takes_value: true
                value_name: HEX
                default_value: "0x5208" # 21000
            - value:
                help: value sent with this transaction
                long: value
                required: true
                takes_value: true
                value_name: HEX
            - data:
                help: Hash of the method signature and encoded parameters
                long: data
                takes_value: true
                value_name: HEX
            - nonce:
                help: Transaction nonce
                long: nonce
                takes_value: true
                value_name: HEX
            - password:
                help: Used to decrypt private key of sender to sign transaction
                long: password
                required: true
                takes_value: true
                value_name: STRING
        - txpool:
            about: Transaction pool subcommands
            setting: SubcommandRequiredElseHelp
            subcommands:
              - status:
                  about: Get the number of transactions for different status
                  args:
                    - rpc-method:
                        default_value: txpool_status
                        hidden: true
              - inspect-one:
                  about: Get the detailed status of specified transaction
                  args:
                    - rpc-method:
                        default_value: tx_inspect
                        hidden: true
                    - rpc-args:
                        multiple: true
                        use_delimiter: true
                        default_value: hash
                        hidden: true
                    - hash:
                        help: Transaction hash
                        long: hash
                        required: true
                        takes_value: true
              - inspect:
                  about: List textual summary of all transactions
                  args:
                    - rpc-method:
                        default_value: txpool_inspect
                        hidden: true
              - content:
                  about: List exact details of all transactions
                  args:
                    - rpc-method:
                        default_value: txpool_content
                        hidden: true
              - clear:
                  about: Remove all transactions
                  args:
                    - rpc-method:
                        default_value: clear_tx_pool
                        hidden: true
        - net:
            about: Network subcommands
            setting: SubcommandRequiredElseHelp
            subcommands:
              - throttling:
                  about: Get the current throttling information
                  args:
                    - rpc-method:
                        default_value: net_throttling
                        hidden: true
              - node:
                  about: Get node information by ID
                  args:
                    - rpc-method:
                        default_value: net_node
                        hidden: true
                    - rpc-args:
                        multiple: true
                        use_delimiter: true
                        default_value: id
                        hidden: true
                    - id:
                        help: Node ID
                        long: id
                        required: true
                        takes_value: true
              - disconnect:
                  about: Disconnect a node
                  args:
                    - rpc-method:
                        default_value: net_disconnect_node
                        hidden: true
                    - rpc-args:
                        multiple: true
                        use_delimiter: true
                        default_value: id,operation
                        hidden: true
                    - id:
                        help: Node ID
                        long: id
                        required: true
                        takes_value: true
                    - operation:
                        help: Operation to update node database
                        long: operation
                        takes_value: true
                        possible_values: [Failure, Demotion, Remove]
              - session:
                  about: Get active session(s)
                  args:
                    - rpc-method:
                        default_value: net_sessions
                        hidden: true
                    - rpc-args:
                        multiple: true
                        use_delimiter: true
                        default_value: id
                        hidden: true
                    - id:
                        help: Node ID
                        long: id
                        takes_value: true
        - sync-phase:
            about: Get the current synchronization phase
            args:
              - rpc-method:
                  default_value: current_sync_phase
                  hidden: true
        - consensus-graph-state:
            about: Get the consensus graph state
            args:
              - rpc-method:
                  default_value: consensus_graph_state
                  hidden: true
        - test:
            about: Test subcommands (used for test purpose only)
            setting: SubcommandRequiredElseHelp
            subcommands:
              - block-count:
                  about: Get the total block count
                  args:
                    - rpc-method:
                        default_value: getblockcount
                        hidden: true
              - goodput:
                  about: Get the recent transaction good TPS
                  args:
                    - rpc-method:
                        default_value: getgoodput
                        hidden: true
              - chain:
                  about: List "ALL" blocks in topological order
                  args:
                    - rpc-method:
                        default_value: cfx_getChain
                        hidden: true
              - stop:
                  about: Stop the conflux program
                  args:
                    - rpc-method:
                        default_value: stop
                        hidden: true
              - status:
                  about: Get the current status of Conflux
                  args:
                    - rpc-method:
                        default_value: getstatus
                        hidden: true
