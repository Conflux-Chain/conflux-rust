<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `diem_secure_storage` crate."><title>diem_secure_storage - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-cf3c48c1.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="diem_secure_storage" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (854f22563 2025-01-31)" data-channel="nightly" data-search-js="search-2d513d54.js" data-settings-js="settings-6dad6058.js" ><script src="../static.files/storage-302de22f.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-9b5d7e41.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../diem_secure_storage/index.html">diem_<wbr>secure_<wbr>storage</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#structs">Crate Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>diem_secure_storage</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/diem_secure_storage/lib.rs.html#8-52">Source</a> </span></div><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.GetResponse.html" title="struct diem_secure_storage::GetResponse">GetResponse</a></dt><dd>A container for a get response that contains relevant metadata and the value
stored at the given key.</dd><dt><a class="struct" href="struct.GitHubStorage.html" title="struct diem_secure_storage::GitHubStorage">GitHub<wbr>Storage</a></dt><dd>GitHubStorage leverages a GitHub repository to provide a file system
approach to key / value storage.  This is not intended for storing private
data but for organizing public data.</dd><dt><a class="struct" href="struct.InMemoryStorage.html" title="struct diem_secure_storage::InMemoryStorage">InMemory<wbr>Storage</a></dt><dd>InMemoryStorage represents a key value store that is purely in memory and
intended for single threads (or must be wrapped by a Arc&lt;RwLock&lt;&gt;&gt;). This
provides no permission checks and simply is a proof of concept to unblock
building of applications without more complex data stores. Internally, it
retains all data, which means that it must make copies of all key material
which violates the Diem code base. It violates it because the anticipation
is that data stores would securely handle key material. This should not be
used in production.</dd><dt><a class="struct" href="struct.NamespacedStorage.html" title="struct diem_secure_storage::NamespacedStorage">Namespaced<wbr>Storage</a></dt><dd>This provides a light wrapper around KV storages to support a namespace.
That namespace is effectively prefixing all keys with then namespace value
and “/” so a namespace of foo and a key of bar becomes “foo/bar”. Without a
namespace, the key would just be “bar”. This matches how this library
implements namespaces for Vault.</dd><dt><a class="struct" href="struct.OnDiskStorage.html" title="struct diem_secure_storage::OnDiskStorage">OnDisk<wbr>Storage</a></dt><dd>OnDiskStorage represents a key value store that is persisted to the local
filesystem and is intended for single threads (or must be wrapped by a
Arc&lt;RwLock&lt;&gt;&gt;). This provides no permission checks and simply offers a proof
of concept to unblock building of applications without more complex data
stores. Internally, it reads and writes all data to a file, which means that
it must make copies of all key material which violates the Diem code base.
It violates it because the anticipation is that data stores would securely
handle key material. This should not be used in production.</dd><dt><a class="struct" href="struct.Permission.html" title="struct diem_secure_storage::Permission">Permission</a></dt><dd>Maps an identity to a set of capabilities</dd><dt><a class="struct" href="struct.Policy.html" title="struct diem_secure_storage::Policy">Policy</a></dt><dd>Dictates a set of permissions</dd><dt><a class="struct" href="struct.PublicKeyResponse.html" title="struct diem_secure_storage::PublicKeyResponse">Public<wbr>KeyResponse</a></dt><dt><a class="struct" href="struct.VaultStorage.html" title="struct diem_secure_storage::VaultStorage">Vault<wbr>Storage</a></dt><dd>VaultStorage utilizes Vault for maintaining encrypted, authenticated data
for Diem. This version currently matches the behavior of OnDiskStorage and
InMemoryStorage. In the future, Vault will be able to create keys, sign
messages, and handle permissions across different services. The specific
vault service leveraged herein is called [KV (Key Value) Secrets Engine - Version 2](<code>&lt;https://www.vaultproject.io/api/secret/kv/kv-v2.html&gt;</code>). So while Diem Secure Storage
calls pointers to data keys, Vault has actually a secret that contains
multiple key value pairs.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.Capability.html" title="enum diem_secure_storage::Capability">Capability</a></dt><dd>Represents actions</dd><dt><a class="enum" href="enum.Error.html" title="enum diem_secure_storage::Error">Error</a></dt><dt><a class="enum" href="enum.Identity.html" title="enum diem_secure_storage::Identity">Identity</a></dt><dd>Id represents a Diem internal identifier for a given process. For example,
safety_rules or key_manager. It is up to the Storage and its deployment to
translate these identifiers into verifiable material. For example, the
process running safety_rules may have a token that is intended for only
safety_rules to own. The specifics are left to the implementation of the
storage backend interface layer.</dd><dt><a class="enum" href="enum.Storage.html" title="enum diem_secure_storage::Storage">Storage</a></dt><dd>This is the Diem interface into secure storage. Any storage engine
implementing this trait should support both key/value operations (e.g., get,
set and create) and cryptographic key operations (e.g., generate_key, sign
and rotate_key).
This is a hack that allows us to convert from SecureBackend into a useable
T: Storage. This boilerplate can be 100% generated by a proc macro.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.CryptoKVStorage.html" title="trait diem_secure_storage::CryptoKVStorage">CryptoKV<wbr>Storage</a></dt><dd>CryptoKVStorage offers a CryptoStorage implementation by extending a key
value store (KVStorage) to create and manage cryptographic keys. This is
useful for providing a simple CryptoStorage implementation based upon an
existing KVStorage engine (e.g. for test purposes).</dd><dt><a class="trait" href="trait.CryptoStorage.html" title="trait diem_secure_storage::CryptoStorage">Crypto<wbr>Storage</a></dt><dd>CryptoStorage provides an abstraction for secure generation and handling of
cryptographic keys.</dd><dt><a class="trait" href="trait.KVStorage.html" title="trait diem_secure_storage::KVStorage">KVStorage</a></dt><dd>A secure key/value storage engine. Create takes a policy that is enforced
internally by the actual backend. The policy contains public identities that
the backend can translate into a unique and private token for another
service. Hence get and set internally will pass the current service private
token to the backend to gain its permissions.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.from_base64.html" title="fn diem_secure_storage::from_base64">from_<wbr>base64</a></dt><dt><a class="fn" href="fn.to_base64.html" title="fn diem_secure_storage::to_base64">to_<wbr>base64</a></dt></dl></section></div></main></body></html>